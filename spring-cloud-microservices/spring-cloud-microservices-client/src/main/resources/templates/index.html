<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8"/>
    <title>OAuth2 SSO Demo</title>
</head>

<body>
<h1>Demo</h1>
<p>Logged in as: <span th:text="${#httpServletRequest.remoteUser}">demo</span></p>
<form th:action="@{/logout}" method="post"><button>Logout</button></form><br />

<!--<div th:fragment="logout" class="logout" sec:authorize="isAuthenticated()">-->
<!--Logged in user: <span sec:authentication="name"></span> |-->
<!--Roles: <span sec:authentication="principal.authorities"></span>-->
<!--<div>-->
<!--<form action="#" th:action="@{/logout}" method="post">-->
<!--<input type="submit" value="Logout" />-->
<!--</form>-->
<!--</div>-->
<!--</div>-->

<form th:action="@{/messages}" method="post">
    <input type="text" name="text" placeholder="Message"/>
    <button>Send</button>
</form>

<h2>Messages</h2>
<div th:each="message : ${messages}">
    <h3><span th:text="${message.username}"></span> @ <span th:text="${message.createdAt}"></span></h3>
    <span th:text="${message.text}"></span>
</div>

</body>
</html>
